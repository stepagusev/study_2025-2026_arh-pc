---
## Author
author:
  name: Гусев Степан Андреевич
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032242444@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчёт по лабораторной работе №4"
subtitle: "Дисциплина: Архитектура компьютеров и операционные системы"
license: "CC BY"
---

# Цель работы

Научиться компилировать и собирать программы, написанные на языке ассемблера NASM.

# Задание

1. Программа Hello world!
2. Транслятор NASM
3. Расширенный синтаксис командной строки NASM
4. Компоновщик LD
5. Запуск исполняемого файла
6. Задание для самостоятельной работы

# Теоретическое введение

Основными функциональными элементами любой ЭВМ являются центральный процессор, память и периферийные устройства. Взаимодействие этих устройств осуществляется через общую шину, к которой они подключены. Физически шина представляет собой большое количество проводников, соединяющих устройства друг с другом. В современных компьютерах проводники выполнены в виде электропроводящих дорожек на материнской плате. Основной задачей процессора является обработка информации, а также организация координации всех узлов компьютера. В состав центрального процессора входят следующие устройства:
	арифметико-логическое устройство (АЛУ) — выполняет логические и арифметические действия, необходимые для обработки информации, хранящейся в памяти;
	устройство управления (УУ) — обеспечивает управление и контроль всех устройств компьютера;
	регистры — сверхбыстрая оперативная память небольшого объёма, входящая в состав процессора, для временного хранения промежуточных результатов выполнения инструкций; регистры процессора делятся на два типа: регистры общего назначения и специальные регистры. Для того, чтобы писать программы на ассемблере, необходимо знать, какие регистры процессора существуют и как их можно использовать. Большинство команд в программах написанных на ассемблере используют регистры в каче- стве операндов. Практически все команды представляют собой преобразование данных хранящихся в регистрах процессора, это например пересылка данных между регистрами или между регистрами и памятью, преобразование (арифметические или логические операции) данных хранящихся в регистрах. Доступ к регистрам осуществляется не по адресам, как к основной памяти, а по именам. Каждый регистр процессора архитектуры x86 имеет свое название, состоящее из 2 или 3 букв латинского алфавита. В качестве примера приведем названия основных регистров общего назначения (именно эти регистры чаще всего используются при написании программ):
	RAX, RCX, RDX, RBX, RSI, RDI — 64-битные
			EAX, ECX, EDX, EBX, ESI, EDI — 32-битные
	AX, CX, DX, BX, SI, DI — 16-битные
	AH, AL, CH, CL, DH, DL, BH, BL — 8-битные

Другим важным узлом ЭВМ является оперативное запоминающее устройство (ОЗУ). ОЗУ — это быстродействующее энергозависимое запоминающее устройство, которое напрямую взаимодействует с узлами процессора, предназначенное для хранения программ и данных, с которыми процессор непосредственно работает в текущий момент. ОЗУ состоит из одинаковых пронумерованных ячеек памяти. Номер ячейки памяти — это адрес хранящихся в ней данных. Периферийные устройства в составе ЭВМ:
	устройства внешней памяти, которые предназначены для долговременного хранения больших объёмов данных.
	устройства ввода-вывода, которые обеспечивают взаимодействие ЦП с внешней средой.

В основе вычислительного процесса ЭВМ лежит принцип программного управления. Это означает, что компьютер решает поставленную задачу как последовательность действий, записанных в виде программы.

Коды команд представляют собой многоразрядные двоичные комбинации из 0 и 1. В коде машинной команды можно выделить две части: операционную и адресную. В операционной части хранится код команды, которую необходимо выполнить. В адресной части хранятся данные или адреса данных, которые участвуют в выполнении данной операции. При выполнении каждой команды процессор выполняет определённую последовательность стандартных действий, которая называется командным циклом процессора. Он заключается в следующем:
	формирование адреса в памяти очередной команды;
	считывание кода команды из памяти и её дешифрация;
	выполнение команды;
	переход к следующей команде.

Язык ассемблера (assembly language, сокращённо asm) — машинно-ориентированный язык низкого уровня. NASM — это открытый проект ассемблера, версии которого доступны под различные операционные системы и который позволяет получать объектные файлы для этих систем. В NASM используется Intel-синтаксис и поддерживаются инструкции x86-64.

# Выполнение лабораторной работы

## Программа Hello world!

Создал каталог для работы с программами на языке ассемблера NASM ([рис. @fig-001]).

![Создание каталога](image/img1.png){#fig-001 width=70%}

Перешёл в созданный каталог ([рис. @fig-002]).

![Перемещение между директориями](image/img2.png){#fig-002 width=70%}

Создал текстовый файл hello.asm ([рис. @fig-003]).

![Создание файла](image/img3.png){#fig-003 width=70%}

Открыл файл с помощью редактора nano ([рис. @fig-004]).

![Открытие файла](image/img4.png){#fig-004 width=70%}

Ввёл данный текст ([рис. @fig-005]).

![Введение текста](image/img5.png){#fig-005 width=70%}

## Транслятор NASM

Скомпилировал файл hello.asm ([рис. @fig-006]).

![Компиляция файла](image/img6.png){#fig-006 width=70%}

С помощью команды ls проверил, что объектный файл создан с именем hello.o ([рис. @fig-007]).

![Проверка](image/img7.png){#fig-007 width=70%}

## Расширенный синтаксис командной строки NASM

Выполнил расширенный вариант команды и с помощью команды ls проверил, что файлы создались ([рис. @fig-008]).

![Компиляция файла](image/img8.png){#fig-008 width=70%}

## Компоновщик LD

Передал объектный файл hello.o на обработку компоновщику и проверил, что файл создан ([рис. @fig-009])

![Обработка файла](image/img9.png){#fig-009 width=70%}

Передал obj.o на обработку компоновщику и проверил, что файл создан ([рис. @fig-010]). Исполняемый файл имеет название main, объектный файл, из которого был собран исполняемый, называется obj.o.

![Обработка файла](image/img10.png){#fig-010 width=70%}

## Запуск исполняемого файла

Запустил на выполнение созданный исполняемый файл ([рис. @fig-011]).

![Запуск программы](image/img11.png){#fig-011 width=70%}

## Задание для самостоятельной работы

1. Создал копию файла hello.asm ([рис. @fig-012]).

![Копирование файла](image/img12.png){#fig-012 width=70%}

2. С помощью текстового редактора nano ([рис. @fig-013]) изменил программу так, чтобы вместо «Hello world!» выводились мои фаимилия и имя ([рис. @fig-014]).

![Открытие файла](image/img13.png){#fig-013 width=70%}

![Изменение файла](image/img14.png){#fig-014 width=70%}

3. Оттранслировал lab4.asm в объектный файл, выполнил его компоновку и запустил исполняемый файл ([рис. @fig-015]).

![Компиляция](image/img15.png){#fig-015 width=70%}

4. Скопировал hello.asm и lab4.asm в локальный репозиторий ([рис. @fig-016]).

![Копирование файлов](image/img16.png){#fig-016 width=70%}

Перешёл в директорию и проверил, что файлы успешно скопировались ([рис. @fig-017]).

![Проверка](image/img17.png){#fig-017 width=70%}

Загрузил файлы на GitHub [рис. @fig-018]).

![Выгрузка файлов на GitHub](image/img18.png){#fig-018 width=70%}

# Выводы

При выполнении данной лабораторной работы я освоил процедуры компиляции и сборки программ, написанных на языке ассемблера NASM.

# Список литературы

1. [Архитектура ЭВМ](https://esystem.rudn.ru/mod/resource/view.php?id=1032146)
